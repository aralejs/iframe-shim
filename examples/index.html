<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">
    <title>Iframe-Shim - 演示文档</title><link rel="stylesheet" href="http://alipay.github.com/liquidluck-theme-arale/assets/app.min.css">
    <link rel="shortcut icon" href="http://alipay.github.com/liquidluck-theme-arale/assets/favicon.ico" type="image/x-icon" />
    <script src="http://seajs.org/dist/sea.js"></script>
    <script src="http://alipay.github.com/liquidluck-theme-arale/tools/arale-helper.js"></script>
    <!--[if lt IE 9]>
      <script src="http://alipay.github.com/liquidluck-theme-arale/assets/html5shiv.js"></script>
    <![endif]-->
  </head>
  <body>
    <header id="header">
      <div class="container">
        <a title="Home" class="icon-home" href="/" id="logo">Arale</a>
        <div class="wrapper fn-clear">
          
          <nav class="global-nav" role="navigation">
            <ul class="fn-clear">
              <li class="developer-guides"><a href="/developer-guides/">开发指南</a></li>
              <li class="user-guides"><a href="/components/">组件文档</a> • <a style="padding-left:0;" href="/mapping.html">Map</a></li>
            </ul>
          </nav>
          <nav class="top-nav" role="navigation">
            <ul class="fn-clear">
              <li class="first"><a target="_blank" href="http://seajs.org">SeaJS</a></li>
              <li class="last"><a target="_blank" href="https://github.com/seajs/spm/wiki">SPM</a></li>
            </ul>
          </nav>
          
        </div>
      </div>
    </header>

    <div id="main">
      <div class="container fn-clear">
<div class="markdown-body">
  <h1 class="entry-title"><a id="back-to-module" href="../">Iframe-Shim</a> - 演示文档</h1>
  <style>
    .cell {
        position:relative;
    }

    .overlay{
        position:absolute;
        width:200px;
        height:50px;
        border:1px solid green;
        background:#fff;
        z-index:10;
    }

    .opacity0{
        filter:alpha(opacity=70);
        -moz-opacity:0.7;
        opacity: 0.7;
    }
</style>

<h3 id="toc_0">1. 正常情况，创建一个遮罩</h3>

<div id="example1" class="cell">
    <div class="overlay opacity0" style="height:100px;">
        .overlay
    </div>
    <p>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    </p>
    <p>
        <input type="text" />
    </p>
</div>

<script>
seajs.use(['jquery','../src/iframe-shim'], function($, Shim){
    // example1
    new Shim('#example1 .overlay').sync();
});
</script>
<div class="highlight"><pre><span class="nx">seajs</span><span class="p">.</span><span class="nx">use</span><span class="p">([</span><span class="s1">&#39;jquery&#39;</span><span class="p">,</span><span class="s1">&#39;../src/iframe-shim&#39;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nx">Shim</span><span class="p">){</span>
    <span class="c1">// example1</span>
    <span class="k">new</span> <span class="nx">Shim</span><span class="p">(</span><span class="s1">&#39;#example1 .overlay&#39;</span><span class="p">).</span><span class="nx">sync</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>

<h3 id="toc_1">2. 遮罩会根据 DOM 的宽高进行调节</h3>

<div id="example2" class="cell">
    <div class="overlay" style="top:50px;">
        .overlay
    </div>
    <p>
        <input type="text" value="" />
        输入宽高，blur 输入框
    </p>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>

</div>

<script>
seajs.use(['jquery','../src/iframe-shim'], function($, Shim){
    //example2
    var shim2 = new Shim('#example2 .overlay').sync();

    $('#example2 input').blur(function(e){
        var value = e.currentTarget.value;

        $('#example2 .overlay').css({
            'height': value,
            'width': value
        });

        shim2.sync();
    });
});
</script>
<div class="highlight"><pre><span class="nx">seajs</span><span class="p">.</span><span class="nx">use</span><span class="p">([</span><span class="s1">&#39;jquery&#39;</span><span class="p">,</span><span class="s1">&#39;../src/iframe-shim&#39;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nx">Shim</span><span class="p">){</span>
    <span class="c1">//example2</span>
    <span class="kd">var</span> <span class="nx">shim2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Shim</span><span class="p">(</span><span class="s1">&#39;#example2 .overlay&#39;</span><span class="p">).</span><span class="nx">sync</span><span class="p">();</span>

    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#example2 input&#39;</span><span class="p">).</span><span class="nx">blur</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">currentTarget</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>

        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#example2 .overlay&#39;</span><span class="p">).</span><span class="nx">css</span><span class="p">({</span>
            <span class="s1">&#39;height&#39;</span><span class="o">:</span> <span class="nx">value</span><span class="p">,</span>
            <span class="s1">&#39;width&#39;</span><span class="o">:</span> <span class="nx">value</span>
        <span class="p">});</span>

        <span class="nx">shim2</span><span class="p">.</span><span class="nx">sync</span><span class="p">();</span>
    <span class="p">});</span>
<span class="p">});</span>
</pre></div>

<h3 id="toc_2">3. 遮罩只会遮盖 border 以及内容部分，margin 则不算</h3>

<div id="example3" class="cell">
    <div class="overlay" style="border-width:20px;margin:20px;">
        border-width:20px;<br>
        margin:20px;
    </div>
    <p>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    </p>
    <p>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    </p>
</div>

<script>
seajs.use(['jquery','../src/iframe-shim'], function($, Shim){
    // example3
    new Shim('#example3 .overlay').sync();
});
</script>
<div class="highlight"><pre><span class="nx">seajs</span><span class="p">.</span><span class="nx">use</span><span class="p">([</span><span class="s1">&#39;jquery&#39;</span><span class="p">,</span><span class="s1">&#39;../src/iframe-shim&#39;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nx">Shim</span><span class="p">){</span>
    <span class="c1">// example3</span>
    <span class="k">new</span> <span class="nx">Shim</span><span class="p">(</span><span class="s1">&#39;#example3 .overlay&#39;</span><span class="p">).</span><span class="nx">sync</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>

<h3 id="toc_3">4. 实例化不会生成 iframe，调用 sync 后才会创建 <a href="#" id="example4-create">点我遮罩</a></h3>

<div id="example4" class="cell">
    <div class="overlay">
        .overlay
    </div>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>
    <select>
        <option value="option"></option>
    </select>

</div>

<script>
seajs.use(['jquery','../src/iframe-shim'], function($, Shim){
    // example4
    var shim4 = new Shim('#example4 .overlay');
    $('#example4-create').click(function(e){
        e.preventDefault();
        shim4.sync();
    });
});
</script>
<div class="highlight"><pre><span class="nx">seajs</span><span class="p">.</span><span class="nx">use</span><span class="p">([</span><span class="s1">&#39;jquery&#39;</span><span class="p">,</span><span class="s1">&#39;../src/iframe-shim&#39;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nx">Shim</span><span class="p">){</span>
    <span class="c1">// example4</span>
    <span class="kd">var</span> <span class="nx">shim4</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Shim</span><span class="p">(</span><span class="s1">&#39;#example4 .overlay&#39;</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#example4-create&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
        <span class="nx">shim4</span><span class="p">.</span><span class="nx">sync</span><span class="p">();</span>
    <span class="p">});</span>
<span class="p">});</span>
</pre></div>

</div>
<div class="sidebar sidebar-components"></div>
      </div>
    </div>

    <footer id="footer">
      <div class="container">
        <div class="copyright">
          <p>&copy; 2012 aralejs.org</p>
          <p>除非另有声明，本站所有代码遵循 MIT 协议</p>
        </div>
      </div>
    </footer>
  </body>
</html>